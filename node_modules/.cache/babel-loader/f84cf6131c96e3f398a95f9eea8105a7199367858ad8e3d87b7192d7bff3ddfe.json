{"ast":null,"code":"var _jsxFileName = \"/home/sonu/opayl/html/frontend/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"../css/bootstrap.min.css\";\nimport { Login as LoginIcon } from \"@mui/icons-material\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { login } from \"../redux/actions/authAction\";\nimport AuthVerificationForm from \"../components/AuthVerification/AuthVarificationForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  console.log(\"login fgdfgfdgdfgdf\", props);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(null);\n  const [waiting, setWaiting] = useState(false);\n  const [verificationForm, setVerificationForm] = useState(false);\n  const [loginForm, setLoginForm] = useState(true);\n  const location = useLocation();\n  useEffect(() => {\n    if (props.auth && props.auth.token) {\n      if (props.auth.isAuthenticated === true && location.pathname === '/login') {\n        window.location.href = '/';\n      } else {\n        setLoginError(\"Invalid Login details\");\n        setWaiting(false);\n      }\n    } else {\n      if (props.auth.two_factor_authentication) {\n        setVerificationForm(true);\n        setLoginForm(false);\n      }\n    }\n  }, [props.auth]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-5 offset-md-4 col-12\",\n          children: [loginForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card shadow\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header text-center\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                \"ng-init\": \"user={}\",\n                children: [loginError && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"alert alert-warning\",\n                  children: \"Username or password is invalid!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 51,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: () => {\n                    setWaiting(true);\n                    props.login({\n                      username,\n                      password\n                    });\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"exampleInputEmail1\",\n                      className: \"form-label\",\n                      children: [\"Username \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 61,\n                        columnNumber: 38\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 60,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control\",\n                      required: true,\n                      value: username,\n                      onChange: e => setUsername(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 63,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 59,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"exampleInputPassword1\",\n                      className: \"form-label\",\n                      children: [\"Password \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 73,\n                        columnNumber: 38\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 72,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"password\",\n                      className: \"form-control\",\n                      id: \"exampleInputPassword1\",\n                      required: true,\n                      value: password,\n                      onChange: e => setPassword(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 75,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"clearfix\",\n                    children: [/*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn-link float-left mt-2\",\n                      to: \"/forgot\",\n                      children: \"Forgot password?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      // type=\"submit\"\n                      onClick: () => {\n                        setWaiting(true);\n                        props.login({\n                          username,\n                          password\n                        });\n                      },\n                      disabled: waiting || username === \"\" || password === \"\",\n                      className: \"btn btn-success btn-success-dark float-right\",\n                      children: [/*#__PURE__*/_jsxDEV(LoginIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 101,\n                        columnNumber: 29\n                      }, this), \" \\xA0 \", !waiting ? \"Login\" : \"Logging in...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 90,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 85,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3\",\n                    children: [\"If you don't have account \\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn-link\",\n                      to: \"/register\",\n                      children: \"Register now\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 19\n            }, this)\n          }, void 0, false) : null, verificationForm ? /*#__PURE__*/_jsxDEV(AuthVerificationForm, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 34\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"EtsBURa8PaAkC5b9f+6xGebRylI=\", false, function () {\n  return [useLocation];\n});\n_c = Login;\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\nexport default connect(mapStateToProps, {\n  login\n})(Login);\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","Login","LoginIcon","Link","useLocation","connect","login","AuthVerificationForm","props","console","log","username","setUsername","password","setPassword","loginError","setLoginError","waiting","setWaiting","verificationForm","setVerificationForm","loginForm","setLoginForm","location","auth","token","isAuthenticated","pathname","window","href","two_factor_authentication","e","target","value","mapStateToProps","state"],"sources":["/home/sonu/opayl/html/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"../css/bootstrap.min.css\";\nimport { Login as LoginIcon } from \"@mui/icons-material\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { login } from \"../redux/actions/authAction\";\nimport AuthVerificationForm from \"../components/AuthVerification/AuthVarificationForm\";\n\nconst Login = (props) => {\n\n  console.log(\"login fgdfgfdgdfgdf\", props)\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(null);\n  const [waiting, setWaiting] = useState(false);\n  const [verificationForm, setVerificationForm] = useState(false)\n  const [loginForm, setLoginForm] = useState(true);\n  const location = useLocation();\n\n  useEffect(() => {\n    if (props.auth && props.auth.token) {\n      if (props.auth.isAuthenticated === true && location.pathname === '/login') {\n        window.location.href = '/';\n      } else {\n        setLoginError(\"Invalid Login details\");\n        setWaiting(false)\n      }\n    }\n     else {\n       if (props.auth.two_factor_authentication) {\n         setVerificationForm(true)\n         setLoginForm(false)\n       }\n     }\n  }, [props.auth]);\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row mt-5\">\n          <div className=\"col-md-5 offset-md-4 col-12\">\n\n            {\n              loginForm ?\n                <>\n                  <div className=\"card shadow\">\n                    <div className=\"card-header text-center\">Login</div>\n                    <div className=\"card-body\" ng-init=\"user={}\">\n                      {loginError && (\n                        <div className=\"alert alert-warning\">\n                          Username or password is invalid!\n                        </div>\n                      )}\n                      <form onSubmit={() => {\n                        setWaiting(true)\n                        props.login({ username, password })\n                      }}>\n                        <div className=\"mb-3\">\n                          <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\n                            Username <span className=\"text-danger\">*</span>\n                          </label>\n                          <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            required\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                          />\n                        </div>\n                        <div className=\"mb-3\">\n                          <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\n                            Password <span className=\"text-danger\">*</span>\n                          </label>\n                          <input\n                            type=\"password\"\n                            className=\"form-control\"\n                            id=\"exampleInputPassword1\"\n                            required\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                          />\n                        </div>\n\n                        <div className=\"clearfix\">\n                          <Link className=\"btn-link float-left mt-2\" to=\"/forgot\">\n                            Forgot password?\n                          </Link>\n\n                          <button\n                            // type=\"submit\"\n                            onClick={() => {\n                              setWaiting(true)\n                              props.login({ username, password })\n\n                            }\n                            }\n                            disabled={waiting || username === \"\" || password === \"\"}\n                            className=\"btn btn-success btn-success-dark float-right\"\n                          >\n                            <LoginIcon /> &nbsp; {!waiting ? \"Login\" : \"Logging in...\"}\n\n                          </button>\n                        </div>\n                        <div className=\"mt-3\">\n                          If you don't have account &nbsp;\n                          <Link className=\"btn-link\" to=\"/register\">\n                            Register now\n                          </Link>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n                </>\n                :\n                null\n            }\n\n\n            {\n              verificationForm ? <AuthVerificationForm /> : null\n            }\n\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps, { login })(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}